#include <Windows.h>
#include <iostream>

#pragma lib("advapi32.lib")

#define TARGET TEXT("\\\\192.168.0.5")
//#define TARGET TEXT("\\\\127.0.0.1")

int main(int argc, TCHAR argv)
{
	HKEY res;
	LSTATUS ret;
	ret = RegConnectRegistryExW(TARGET, HKEY_CURRENT_USER, 0, &res);
	//SC_HANDLE ret;
	//ret = OpenSCManager(TARGET, NULL, SC_MANAGER_CONNECT);
	std::cout << "RegConnectRegistryExW returned: " << ret << std::endl;
	std::cout << "GetLastError: " << GetLastError() << std::endl;
	return 0;
}